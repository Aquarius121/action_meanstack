/*!
 * bootstrap-tags 1.1.5
 * https://github.com/maxwells/bootstrap-tags
 * Copyright 2013 Max Lahey; Licensed MIT
 */
!function(t){(function(){window.Tags||(window.Tags={}),jQuery(function(){return t.tags=function(e,s){var n,a,i,r,g,o,u,l=this;null==s&&(s={});for(n in s)r=s[n],this[n]=r;if(this.bootstrapVersion||(this.bootstrapVersion="3"),this.readOnly||(this.readOnly=!1),this.suggestOnClick||(this.suggestOnClick=!1),this.suggestions||(this.suggestions=[]),this.restrictTo=null!=s.restrictTo?s.restrictTo.concat(this.suggestions):!1,this.exclude||(this.exclude=!1),this.displayPopovers=null!=s.popovers?!0:null!=s.popoverData,this.popoverTrigger||(this.popoverTrigger="hover"),this.tagClass||(this.tagClass="btn-info"),this.tagSize||(this.tagSize="md"),this.promptText||(this.promptText="Enter tags..."),this.caseInsensitive||(this.caseInsensitive=!1),this.readOnlyEmptyMessage||(this.readOnlyEmptyMessage="No tags to display..."),this.maxNumTags||(this.maxNumTags=-1),this.beforeAddingTag||(this.beforeAddingTag=function(){}),this.afterAddingTag||(this.afterAddingTag=function(){}),this.beforeDeletingTag||(this.beforeDeletingTag=function(){}),this.afterDeletingTag||(this.afterDeletingTag=function(){}),this.definePopover||(this.definePopover=function(t){return'associated content for "'+t+'"'}),this.excludes||(this.excludes=function(){return!1}),this.tagRemoved||(this.tagRemoved=function(){}),this.pressedReturn||(this.pressedReturn=function(){}),this.pressedDelete||(this.pressedDelete=function(){}),this.pressedDown||(this.pressedDown=function(){}),this.pressedUp||(this.pressedUp=function(){}),this.$element=t(e),null!=s.tagData?this.tagsArray=s.tagData:(i=t(".tag-data",this.$element).html(),this.tagsArray=null!=i?i.split(","):[]),s.popoverData)this.popoverArray=s.popoverData;else for(this.popoverArray=[],u=this.tagsArray,g=0,o=u.length;o>g;g++)a=u[g],this.popoverArray.push(null);return this.getTags=function(){return l.tagsArray},this.getTagsContent=function(){return l.popoverArray},this.getTagsWithContent=function(){var t,e,s,n;for(t=[],e=s=0,n=l.tagsArray.length-1;n>=0?n>=s:s>=n;e=n>=0?++s:--s)t.push({tag:l.tagsArray[e],content:l.popoverArray[e]});return t},this.getTag=function(t){var e;return e=l.tagsArray.indexOf(t),e>-1?l.tagsArray[e]:null},this.getTagWithContent=function(t){var e;return e=l.tagsArray.indexOf(t),{tag:l.tagsArray[e],content:l.popoverArray[e]}},this.hasTag=function(t){return l.tagsArray.indexOf(t)>-1},this.removeTagClicked=function(e){return"A"===e.currentTarget.tagName&&(l.removeTag(t("span",e.currentTarget.parentElement).html()),t(e.currentTarget.parentNode).remove()),l},this.removeLastTag=function(){return l.tagsArray.length>0&&(l.removeTag(l.tagsArray[l.tagsArray.length-1]),l.canAddByMaxNum()&&l.enableInput()),l},this.removeTag=function(t){if(l.tagsArray.indexOf(t)>-1){if(l.beforeDeletingTag(t)===!1)return;l.popoverArray.splice(l.tagsArray.indexOf(t),1),l.tagsArray.splice(l.tagsArray.indexOf(t),1),l.renderTags(),l.afterDeletingTag(t),l.canAddByMaxNum()&&l.enableInput()}return l},this.canAddByRestriction=function(t){return this.restrictTo===!1||-1!==this.restrictTo.indexOf(t)},this.canAddByExclusion=function(t){return(this.exclude===!1||-1===this.exclude.indexOf(t))&&!this.excludes(t)},this.canAddByMaxNum=function(){return-1===this.maxNumTags||this.tagsArray.length<this.maxNumTags},this.addTag=function(t){var e;if(l.canAddByRestriction(t)&&!l.hasTag(t)&&t.length>0&&l.canAddByExclusion(t)&&l.canAddByMaxNum()){if(l.beforeAddingTag(t)===!1)return;e=l.definePopover(t),l.popoverArray.push(e||null),l.tagsArray.push(t),l.afterAddingTag(t),l.renderTags(),l.canAddByMaxNum()||l.disableInput()}return l},this.addTagWithContent=function(t,e){if(l.canAddByRestriction(t)&&!l.hasTag(t)&&t.length>0){if(l.beforeAddingTag(t)===!1)return;l.tagsArray.push(t),l.popoverArray.push(e),l.afterAddingTag(t),l.renderTags()}return l},this.renameTag=function(t,e){return l.tagsArray[l.tagsArray.indexOf(t)]=e,l.renderTags(),l},this.setPopover=function(t,e){return l.popoverArray[l.tagsArray.indexOf(t)]=e,l.renderTags(),l},this.clickHandler=function(t){return l.makeSuggestions(t,!0)},this.blurHandler=function(t){return t.preventDefault(),l.pressedReturn(t),a=t.target.value,-1!==l.suggestedIndex&&(a=l.suggestionList[l.suggestedIndex]),l.addTag(a),t.target.value="",l.renderTags(),l.hideSuggestions()},this.keyDownHandler=function(t){var e,s;switch(e=null!=t.keyCode?t.keyCode:t.which){case 13:return t.preventDefault(),l.pressedReturn(t),a=t.target.value,-1!==l.suggestedIndex&&(a=l.suggestionList[l.suggestedIndex]),l.addTag(a),t.target.value="",l.renderTags(),l.hideSuggestions();case 46:case 8:if(l.pressedDelete(t),""===t.target.value&&l.removeLastTag(),1===t.target.value.length)return l.hideSuggestions();break;case 40:if(l.pressedDown(t),""!==l.input.val()||-1!==l.suggestedIndex&&null!=l.suggestedIndex||l.makeSuggestions(t,!0),s=l.suggestionList.length,l.suggestedIndex=l.suggestedIndex<s-1?l.suggestedIndex+1:s-1,l.selectSuggested(l.suggestedIndex),l.suggestedIndex>=0)return l.scrollSuggested(l.suggestedIndex);break;case 38:if(l.pressedUp(t),l.suggestedIndex=l.suggestedIndex>0?l.suggestedIndex-1:0,l.selectSuggested(l.suggestedIndex),l.suggestedIndex>=0)return l.scrollSuggested(l.suggestedIndex);break;case 9:case 27:return l.hideSuggestions(),l.suggestedIndex=-1}},this.keyUpHandler=function(t){var e;return e=null!=t.keyCode?t.keyCode:t.which,40!==e&&38!==e&&27!==e?l.makeSuggestions(t,!1):void 0},this.getSuggestions=function(e,s){var n=this;return this.suggestionList=[],this.caseInsensitive&&(e=e.toLowerCase()),t.each(this.suggestions,function(t,a){var i;return i=n.caseInsensitive?a.substring(0,e.length).toLowerCase():a.substring(0,e.length),n.tagsArray.indexOf(a)<0&&i===e&&(e.length>0||s)?n.suggestionList.push(a):void 0}),this.suggestionList},this.makeSuggestions=function(e,s,n){return null==n&&(n=null!=e.target.value?e.target.value:e.target.textContent),l.suggestedIndex=-1,l.$suggestionList.html(""),t.each(l.getSuggestions(n,s),function(t,e){return l.$suggestionList.append(l.template("tags_suggestion",{suggestion:e}))}),l.$(".tags-suggestion").mouseover(l.selectSuggestedMouseOver),l.$(".tags-suggestion").click(l.suggestedClicked),l.suggestionList.length>0?l.showSuggestions():l.hideSuggestions()},this.suggestedClicked=function(t){return a=t.target.textContent,-1!==l.suggestedIndex&&(a=l.suggestionList[l.suggestedIndex]),l.addTag(a),l.input.val(""),l.makeSuggestions(t,!1,""),l.input.focus(),l.hideSuggestions()},this.hideSuggestions=function(){return l.$(".tags-suggestion-list").css({display:"none"})},this.showSuggestions=function(){return l.$(".tags-suggestion-list").css({display:"block"})},this.selectSuggestedMouseOver=function(e){return t(".tags-suggestion").removeClass("tags-suggestion-highlighted"),t(e.target).addClass("tags-suggestion-highlighted"),t(e.target).mouseout(l.selectSuggestedMousedOut),l.suggestedIndex=l.$(".tags-suggestion").index(t(e.target))},this.selectSuggestedMousedOut=function(e){return t(e.target).removeClass("tags-suggestion-highlighted")},this.selectSuggested=function(e){var s;return t(".tags-suggestion").removeClass("tags-suggestion-highlighted"),s=l.$(".tags-suggestion").eq(e),s.addClass("tags-suggestion-highlighted")},this.scrollSuggested=function(t){var e,s,n,a;return s=l.$(".tags-suggestion").eq(t),n=l.$(".tags-suggestion").eq(0),e=s.position(),a=n.position(),null!=e?l.$(".tags-suggestion-list").scrollTop(e.top-a.top):void 0},this.adjustInputPosition=function(){var e,s,n,a,i,r;return i=l.$(".tag").last(),r=i.position(),s=null!=r?r.left+i.outerWidth(!0):0,n=null!=r?r.top:0,a=l.$element.width()-s,t(".tags-input",l.$element).css({paddingLeft:Math.max(s,0),paddingTop:Math.max(n,0),width:a}),e=null!=r?r.top+i.outerHeight(!0):22,l.$element.css({paddingBottom:e-l.$element.height()})},this.renderTags=function(){var e;return e=l.$(".tags"),e.html(""),l.input.attr("placeholder",0===l.tagsArray.length?l.promptText:""),t.each(l.tagsArray,function(s,n){return n=t(l.formatTag(s,n)),t("a",n).click(l.removeTagClicked),t("a",n).mouseover(l.toggleCloseColor),t("a",n).mouseout(l.toggleCloseColor),l.displayPopovers&&l.initializePopoverFor(n,l.tagsArray[s],l.popoverArray[s]),e.append(n)}),l.adjustInputPosition()},this.renderReadOnly=function(){var e;return e=l.$(".tags"),e.html(0===l.tagsArray.length?l.readOnlyEmptyMessage:""),t.each(l.tagsArray,function(s,n){return n=t(l.formatTag(s,n,!0)),l.displayPopovers&&l.initializePopoverFor(n,l.tagsArray[s],l.popoverArray[s]),e.append(n)})},this.disableInput=function(){return this.$("input").prop("disabled",!0)},this.enableInput=function(){return this.$("input").prop("disabled",!1)},this.initializePopoverFor=function(e,n,a){return s={title:n,content:a,placement:"bottom"},"hoverShowClickHide"===l.popoverTrigger?(t(e).mouseover(function(){return t(e).popover("show"),t(".tag").not(e).popover("hide")}),t(document).click(function(){return t(e).popover("hide")})):s.trigger=l.popoverTrigger,t(e).popover(s)},this.toggleCloseColor=function(e){var s,n;return n=t(e.currentTarget),s=n.css("opacity"),s=.8>s?1:.6,n.css({opacity:s})},this.formatTag=function(t,e,s){var n;return null==s&&(s=!1),n=e.replace("<","&lt;").replace(">","&gt;"),l.template("tag",{tag:n,tagClass:l.tagClass,isPopover:l.displayPopovers,isReadOnly:s,tagSize:l.tagSize})},this.addDocumentListeners=function(){return t(document).mouseup(function(t){var e;return e=l.$(".tags-suggestion-list"),0===e.has(t.target).length?l.hideSuggestions():void 0})},this.template=function(t,e){return Tags.Templates.Template(this.getBootstrapVersion(),t,e)},this.$=function(e){return t(e,this.$element)},this.getBootstrapVersion=function(){return Tags.bootstrapVersion||this.bootstrapVersion},this.initializeDom=function(){return this.$element.append(this.template("tags_container"))},this.init=function(){return this.$element.addClass("bootstrap-tags").addClass("bootstrap-"+this.getBootstrapVersion()),this.initializeDom(),this.readOnly?(this.renderReadOnly(),this.removeTag=function(){},this.removeTagClicked=function(){},this.removeLastTag=function(){},this.addTag=function(){},this.addTagWithContent=function(){},this.renameTag=function(){},this.setPopover=function(){}):(this.input=t(this.template("input",{tagSize:this.tagSize})),this.suggestOnClick&&this.input.click(this.clickHandler),this.input.keydown(this.keyDownHandler),this.input.keyup(this.keyUpHandler),this.input.blur(this.blurHandler),this.$element.append(this.input),this.$suggestionList=t(this.template("suggestion_list")),this.$element.append(this.$suggestionList),this.renderTags(),this.canAddByMaxNum()||this.disableInput(),this.addDocumentListeners())},this.init(),this},t.fn.tags=function(e){var s,n;return n={},s="number"==typeof e?e:-1,this.each(function(a,i){var r;return r=t(i),null==r.data("tags")&&r.data("tags",new t.tags(this,e)),s===a||0===a?n=r.data("tags"):void 0}),n}})}).call(this),function(){window.Tags||(window.Tags={}),Tags.Helpers||(Tags.Helpers={}),Tags.Helpers.addPadding=function(t,e,s){return null==e&&(e=1),null==s&&(s=!0),s?0===e?t:Tags.Helpers.addPadding("&nbsp"+t+"&nbsp",e-1):t}}.call(this),function(){var t;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(t=Tags.Templates)[2]||(t[2]={}),Tags.Templates[2].input=function(t){var e;return null==t&&(t={}),e=function(){switch(t.tagSize){case"sm":return"small";case"md":return"medium";case"lg":return"large"}}(),"<input type='text' class='tags-input input-"+e+"' />"}}.call(this),function(){var t;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(t=Tags.Templates)[2]||(t[2]={}),Tags.Templates[2].tag=function(t){return null==t&&(t={}),"<div class='tag label "+t.tagClass+" "+t.tagSize+"' "+(t.isPopover?"rel='popover'":"")+">    <span>"+Tags.Helpers.addPadding(t.tag,2,t.isReadOnly)+"</span>    "+(t.isReadOnly?"":"<a><i class='remove icon-remove-sign icon-white' /></a>")+"  </div>"}}.call(this),function(){var t;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(t=Tags.Templates)[3]||(t[3]={}),Tags.Templates[3].input=function(t){return null==t&&(t={}),"<input type='text' class='form-control tags-input input-"+t.tagSize+"' />"}}.call(this),function(){var t;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(t=Tags.Templates)[3]||(t[3]={}),Tags.Templates[3].tag=function(t){return null==t&&(t={}),"<div class='tag label "+t.tagClass+" "+t.tagSize+"' "+(t.isPopover?"rel='popover'":"")+">    <span>"+Tags.Helpers.addPadding(t.tag,2,t.isReadOnly)+"</span>    "+(t.isReadOnly?"":"<a><i class='remove glyphicon glyphicon-remove-sign glyphicon-white' /></a>")+"  </div>"}}.call(this),function(){var t;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(t=Tags.Templates).shared||(t.shared={}),Tags.Templates.shared.suggestion_list=function(t){return null==t&&(t={}),'<ul class="tags-suggestion-list dropdown-menu"></ul>'}}.call(this),function(){var t;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(t=Tags.Templates).shared||(t.shared={}),Tags.Templates.shared.tags_container=function(t){return null==t&&(t={}),'<div class="tags"></div>'}}.call(this),function(){var t;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(t=Tags.Templates).shared||(t.shared={}),Tags.Templates.shared.tags_suggestion=function(t){return null==t&&(t={}),"<li class='tags-suggestion'>"+t.suggestion+"</li>"}}.call(this),function(){window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),Tags.Templates.Template=function(t,e,s){return null!=Tags.Templates[t]&&null!=Tags.Templates[t][e]?Tags.Templates[t][e](s):Tags.Templates.shared[e](s)}}.call(this)}(window.jQuery);